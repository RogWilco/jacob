{
  "action": "opened",
  "issue": {
    "url": "https://api.github.com/repos/kleneway/jacob/issues/56",
    "repository_url": "https://api.github.com/repos/kleneway/jacob",
    "labels_url": "https://api.github.com/repos/kleneway/jacob/issues/56/labels{/name}",
    "comments_url": "https://api.github.com/repos/kleneway/jacob/issues/56/comments",
    "events_url": "https://api.github.com/repos/kleneway/jacob/issues/56/events",
    "html_url": "https://github.com/kleneway/jacob/issues/56",
    "id": 2392870140,
    "node_id": "I_kwDOME9Q9M6OoEz8",
    "number": 56,
    "title": "Persist research to db",
    "user": {
      "login": "kleneway",
      "id": 542289,
      "node_id": "MDQ6VXNlcjU0MjI4OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/542289?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kleneway",
      "html_url": "https://github.com/kleneway",
      "followers_url": "https://api.github.com/users/kleneway/followers",
      "following_url": "https://api.github.com/users/kleneway/following{/other_user}",
      "gists_url": "https://api.github.com/users/kleneway/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kleneway/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kleneway/subscriptions",
      "organizations_url": "https://api.github.com/users/kleneway/orgs",
      "repos_url": "https://api.github.com/users/kleneway/repos",
      "events_url": "https://api.github.com/users/kleneway/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kleneway/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2024-07-05T16:18:33Z",
    "updated_at": "2024-07-05T16:18:33Z",
    "closed_at": null,
    "author_association": "OWNER",
    "active_lock_reason": null,
    "body": "Currently we are creating a `research` string when a new Todo is created. Currently we're just saving that research as a string on the todo description. We need to update this to be more sophisticated. Here are some of the tasks:\r\n- Change research from a string to more structured data. Create a new Typescript interface for it called 'Research'. The main fields should be: \r\n  type: ResearchAgentActionType; // Type of research conducted\r\n  question: string; // The query or question asked\r\n  answer: string; // The response or answer obtained\r\n  issueId: string; // Reference to the GitHub issue this research is related to\r\n- Create a new `research` table in the database. Be sure to create a migration and be careful with that type enum. Look at other table creation migrations to see the right patterns. Include a todoId as the main foreign key that will link research to the specific todo item, and also add the issueId. If the parent todoId is deleted, delete all of the research items tied to that parent. \r\n- Update the code in the agent research (researchIssue function) to capture the data using this new format. Return the array of Research objects instead of the string. \r\n- Update the Todos to first check to see if any research has already been done for this issue. If it has, skip the research step. If not, do the research. Create the Todo first and then link the research to the todos using the todoId. \r\n- Add a function to the `research.ts` file to pass in an issue id (payload.issue.number) and get back an array of research items.\r\n- in the Code agentEditFile and agentFixError files, currently the research is set to an empty string. Update that to get the research from the db using the function you just created, and then turn it into a string of question / answers. This research var should already be used as needed in the rest of the codebase. ",
    "reactions": {
      "url": "https://api.github.com/repos/kleneway/jacob/issues/56/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/kleneway/jacob/issues/56/timeline",
    "performed_via_github_app": null,
    "state_reason": null
  },
  "repository": {
    "id": 810504436,
    "node_id": "R_kgDOME9Q9A",
    "name": "jacob",
    "full_name": "kleneway/jacob",
    "private": false,
    "owner": {
      "login": "kleneway",
      "id": 542289,
      "node_id": "MDQ6VXNlcjU0MjI4OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/542289?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kleneway",
      "html_url": "https://github.com/kleneway",
      "followers_url": "https://api.github.com/users/kleneway/followers",
      "following_url": "https://api.github.com/users/kleneway/following{/other_user}",
      "gists_url": "https://api.github.com/users/kleneway/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kleneway/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kleneway/subscriptions",
      "organizations_url": "https://api.github.com/users/kleneway/orgs",
      "repos_url": "https://api.github.com/users/kleneway/repos",
      "events_url": "https://api.github.com/users/kleneway/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kleneway/received_events",
      "type": "User",
      "site_admin": false
    },
    "html_url": "https://github.com/kleneway/jacob",
    "description": "Just Another Coding Bot",
    "fork": true,
    "url": "https://api.github.com/repos/kleneway/jacob",
    "forks_url": "https://api.github.com/repos/kleneway/jacob/forks",
    "keys_url": "https://api.github.com/repos/kleneway/jacob/keys{/key_id}",
    "collaborators_url": "https://api.github.com/repos/kleneway/jacob/collaborators{/collaborator}",
    "teams_url": "https://api.github.com/repos/kleneway/jacob/teams",
    "hooks_url": "https://api.github.com/repos/kleneway/jacob/hooks",
    "issue_events_url": "https://api.github.com/repos/kleneway/jacob/issues/events{/number}",
    "events_url": "https://api.github.com/repos/kleneway/jacob/events",
    "assignees_url": "https://api.github.com/repos/kleneway/jacob/assignees{/user}",
    "branches_url": "https://api.github.com/repos/kleneway/jacob/branches{/branch}",
    "tags_url": "https://api.github.com/repos/kleneway/jacob/tags",
    "blobs_url": "https://api.github.com/repos/kleneway/jacob/git/blobs{/sha}",
    "git_tags_url": "https://api.github.com/repos/kleneway/jacob/git/tags{/sha}",
    "git_refs_url": "https://api.github.com/repos/kleneway/jacob/git/refs{/sha}",
    "trees_url": "https://api.github.com/repos/kleneway/jacob/git/trees{/sha}",
    "statuses_url": "https://api.github.com/repos/kleneway/jacob/statuses/{sha}",
    "languages_url": "https://api.github.com/repos/kleneway/jacob/languages",
    "stargazers_url": "https://api.github.com/repos/kleneway/jacob/stargazers",
    "contributors_url": "https://api.github.com/repos/kleneway/jacob/contributors",
    "subscribers_url": "https://api.github.com/repos/kleneway/jacob/subscribers",
    "subscription_url": "https://api.github.com/repos/kleneway/jacob/subscription",
    "commits_url": "https://api.github.com/repos/kleneway/jacob/commits{/sha}",
    "git_commits_url": "https://api.github.com/repos/kleneway/jacob/git/commits{/sha}",
    "comments_url": "https://api.github.com/repos/kleneway/jacob/comments{/number}",
    "issue_comment_url": "https://api.github.com/repos/kleneway/jacob/issues/comments{/number}",
    "contents_url": "https://api.github.com/repos/kleneway/jacob/contents/{+path}",
    "compare_url": "https://api.github.com/repos/kleneway/jacob/compare/{base}...{head}",
    "merges_url": "https://api.github.com/repos/kleneway/jacob/merges",
    "archive_url": "https://api.github.com/repos/kleneway/jacob/{archive_format}{/ref}",
    "downloads_url": "https://api.github.com/repos/kleneway/jacob/downloads",
    "issues_url": "https://api.github.com/repos/kleneway/jacob/issues{/number}",
    "pulls_url": "https://api.github.com/repos/kleneway/jacob/pulls{/number}",
    "milestones_url": "https://api.github.com/repos/kleneway/jacob/milestones{/number}",
    "notifications_url": "https://api.github.com/repos/kleneway/jacob/notifications{?since,all,participating}",
    "labels_url": "https://api.github.com/repos/kleneway/jacob/labels{/name}",
    "releases_url": "https://api.github.com/repos/kleneway/jacob/releases{/id}",
    "deployments_url": "https://api.github.com/repos/kleneway/jacob/deployments",
    "created_at": "2024-06-04T20:32:18Z",
    "updated_at": "2024-07-05T16:13:51Z",
    "pushed_at": "2024-07-05T16:13:47Z",
    "git_url": "git://github.com/kleneway/jacob.git",
    "ssh_url": "git@github.com:kleneway/jacob.git",
    "clone_url": "https://github.com/kleneway/jacob.git",
    "svn_url": "https://github.com/kleneway/jacob",
    "homepage": "https://jacb.ai",
    "size": 2738,
    "stargazers_count": 0,
    "watchers_count": 0,
    "language": "TypeScript",
    "has_issues": true,
    "has_projects": true,
    "has_downloads": true,
    "has_wiki": true,
    "has_pages": false,
    "has_discussions": false,
    "forks_count": 0,
    "mirror_url": null,
    "archived": false,
    "disabled": false,
    "open_issues_count": 46,
    "license": {
      "key": "apache-2.0",
      "name": "Apache License 2.0",
      "spdx_id": "Apache-2.0",
      "url": "https://api.github.com/licenses/apache-2.0",
      "node_id": "MDc6TGljZW5zZTI="
    },
    "allow_forking": true,
    "is_template": false,
    "web_commit_signoff_required": false,
    "topics": [],
    "visibility": "public",
    "forks": 0,
    "open_issues": 46,
    "watchers": 0,
    "default_branch": "main"
  },
  "sender": {
    "login": "kleneway",
    "id": 542289,
    "node_id": "MDQ6VXNlcjU0MjI4OQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/542289?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kleneway",
    "html_url": "https://github.com/kleneway",
    "followers_url": "https://api.github.com/users/kleneway/followers",
    "following_url": "https://api.github.com/users/kleneway/following{/other_user}",
    "gists_url": "https://api.github.com/users/kleneway/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kleneway/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kleneway/subscriptions",
    "organizations_url": "https://api.github.com/users/kleneway/orgs",
    "repos_url": "https://api.github.com/users/kleneway/repos",
    "events_url": "https://api.github.com/users/kleneway/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kleneway/received_events",
    "type": "User",
    "site_admin": false
  },
  "installation": {
    "id": 48653147,
    "node_id": "MDIzOkludGVncmF0aW9uSW5zdGFsbGF0aW9uNDg2NTMxNDc="
  }
}
